<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="style.css"> 
        <link rel="manifest" href="manifest.json">
        <meta name="theme-color" content="#BCE3E2">
        <meta charset="UTF-8">
        <title></title>
    </head>
    <body onload="fetchcontacts()">
        
        <div id="table">Contacts loading...</div>
        <button id="refresh">Refresh</button>
        <button id="addcontact" type="button">Add Contact</button>

        <script src="config.js"></script>
        <script>
            document.getElementById("refresh").addEventListener('click', fetchcontacts); 
            document.getElementById("addcontact").addEventListener('click', addcontact);

            function fetchcontacts(){
                fetch(rootPath + "controller/get-contacts/")
                .then(function(response){
                return response.json();
            })
                .then(function(data){
                displayoutput(data);
            })
          }

            function displayoutput(data){
                output = "<table>";
            
                for(a in data){
                    output += `
                        <tr>
                            <td><img src="${rootPath}controller/uploads/${data[a].avatar}" width="50" height="50"/></td> 
                            <td><h3>${data[a].firstname}</h3></td>  
                            <td><h3>${data[a].lastname}</h3></td>   
                        </tr>
                    `
                }

                output += "</table>";
                document.getElementById("table").innerHTML = output;
            }

            function addcontact(){
                window.open("addcontact.html", "_self");
            }
        </script>

    </body>
</html>
